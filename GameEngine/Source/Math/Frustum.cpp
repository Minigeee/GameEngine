#include <Math/Frustum.h>

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

Frustum::Frustum()
{

}

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

void Frustum::SetPlane(const Plane& plane, Side side)
{
	mPlanes[side] = plane;
}

///////////////////////////////////////////////////////////////////////////////

bool Frustum::Contains(const BoundingBox& box) const
{
	const Vector3f& min = box.mMin;
	const Vector3f& max = box.mMax;

	for (Uint32 i = 0; i < 6; ++i)
	{
		const Plane& plane = mPlanes[i];

		Vector3f vmin;
		vmin.x = plane.n.x > 0.0f ? max.x : min.x;
		vmin.y = plane.n.y > 0.0f ? max.y : min.y;
		vmin.z = plane.n.z > 0.0f ? max.z : min.z;

		if (plane.Dist(vmin) < 0.0f)
			return false;
	}

	return true;
}

///////////////////////////////////////////////////////////////////////////////